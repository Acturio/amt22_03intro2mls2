<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 6 Sesgo e Inequidad | AMAT- Ciencia de Datos y Machine Learning 2</title>
  <meta name="description" content="AMAT Curso 2 : Ciencia de Datos y Machine Learning 2" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 6 Sesgo e Inequidad | AMAT- Ciencia de Datos y Machine Learning 2" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="AMAT Curso 2 : Ciencia de Datos y Machine Learning 2" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 6 Sesgo e Inequidad | AMAT- Ciencia de Datos y Machine Learning 2" />
  
  <meta name="twitter:description" content="AMAT Curso 2 : Ciencia de Datos y Machine Learning 2" />
  

<meta name="author" content="Karina Lizette Gamboa Puente" />
<meta name="author" content="Oscar Arturo Bringas López" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="workflowsets-stacking.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li|
|:-:|  
<center>Ciencia de Datos y Machine Learning 2</center>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>BIENVENIDA</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objetivo"><i class="fa fa-check"></i>Objetivo</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#instructores"><i class="fa fa-check"></i>Instructores</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#ciencia-de-datos-en-r"><i class="fa fa-check"></i>Ciencia de Datos en R</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-curso-actual"><i class="fa fa-check"></i>Estructura del curso actual</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#alcances-del-curso"><i class="fa fa-check"></i>Alcances del curso</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#duración-y-evaluación-del-curso"><i class="fa fa-check"></i>Duración y evaluación del curso</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recursos-y-dinámica-de-clase"><i class="fa fa-check"></i>Recursos y dinámica de clase</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="repaso.html"><a href="repaso.html"><i class="fa fa-check"></i><b>1</b> Repaso</a>
<ul>
<li class="chapter" data-level="1.1" data-path="repaso.html"><a href="repaso.html#machine-learning"><i class="fa fa-check"></i><b>1.1</b> Machine Learning</a></li>
<li class="chapter" data-level="1.2" data-path="repaso.html"><a href="repaso.html#tipos-de-aprendizaje"><i class="fa fa-check"></i><b>1.2</b> Tipos de aprendizaje</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="repaso.html"><a href="repaso.html#aprendizaje-supervisado"><i class="fa fa-check"></i><b>1.2.1</b> Aprendizaje supervisado</a></li>
<li class="chapter" data-level="1.2.2" data-path="repaso.html"><a href="repaso.html#aprendizaje-no-supervisado"><i class="fa fa-check"></i><b>1.2.2</b> Aprendizaje no supervisado</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="repaso.html"><a href="repaso.html#errores-sesgo-vs-varianza"><i class="fa fa-check"></i><b>1.3</b> Errores: Sesgo vs varianza</a></li>
<li class="chapter" data-level="1.4" data-path="repaso.html"><a href="repaso.html#partición-de-datos"><i class="fa fa-check"></i><b>1.4</b> Partición de datos</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="repaso.html"><a href="repaso.html#métodos-comunes-para-particionar-datos"><i class="fa fa-check"></i><b>1.4.1</b> Métodos comunes para particionar datos</a></li>
<li class="chapter" data-level="1.4.2" data-path="repaso.html"><a href="repaso.html#conjunto-de-validación"><i class="fa fa-check"></i><b>1.4.2</b> Conjunto de validación</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="repaso.html"><a href="repaso.html#recetas-y-tratamiento-de-datos"><i class="fa fa-check"></i><b>1.5</b> Recetas y tratamiento de datos</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="repaso.html"><a href="repaso.html#pre-procesamiento-de-datos"><i class="fa fa-check"></i><b>1.5.1</b> Pre-procesamiento de datos</a></li>
<li class="chapter" data-level="1.5.2" data-path="repaso.html"><a href="repaso.html#recetas"><i class="fa fa-check"></i><b>1.5.2</b> Recetas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>2</b> Feature Engineering</a>
<ul>
<li class="chapter" data-level="2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#regresión-polinomial"><i class="fa fa-check"></i><b>2.1</b> Regresión polinomial</a></li>
<li class="chapter" data-level="2.2" data-path="feature-engineering.html"><a href="feature-engineering.html#análisis-de-componentes-principales"><i class="fa fa-check"></i><b>2.2</b> Análisis de Componentes Principales</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="feature-engineering.html"><a href="feature-engineering.html#eigenvalores-y-eigenvectores"><i class="fa fa-check"></i><b>2.2.1</b> Eigenvalores y eigenvectores</a></li>
<li class="chapter" data-level="2.2.2" data-path="feature-engineering.html"><a href="feature-engineering.html#implementación-en-r"><i class="fa fa-check"></i><b>2.2.2</b> Implementación en R</a></li>
<li class="chapter" data-level="2.2.3" data-path="feature-engineering.html"><a href="feature-engineering.html#representación-gráfica"><i class="fa fa-check"></i><b>2.2.3</b> Representación gráfica</a></li>
<li class="chapter" data-level="2.2.4" data-path="feature-engineering.html"><a href="feature-engineering.html#cuántas-componentes-retener"><i class="fa fa-check"></i><b>2.2.4</b> ¿Cuántas componentes retener?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="feature-engineering.html"><a href="feature-engineering.html#imputación-knn"><i class="fa fa-check"></i><b>2.3</b> Imputación KNN</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="feature-engineering.html"><a href="feature-engineering.html#ventajas-y-limitaciones-del-clasificador-knn"><i class="fa fa-check"></i><b>2.3.1</b> <strong>Ventajas y limitaciones del Clasificador KNN</strong></a></li>
<li class="chapter" data-level="2.3.2" data-path="feature-engineering.html"><a href="feature-engineering.html#implementación-en-r-1"><i class="fa fa-check"></i><b>2.3.2</b> Implementación en R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="feature-engineering.html"><a href="feature-engineering.html#ejercicios"><i class="fa fa-check"></i><b>2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html"><i class="fa fa-check"></i><b>3</b> Support Vector Machine (SVM / SVR)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#maximum-margin-classifier"><i class="fa fa-check"></i><b>3.1</b> Maximum Margin Classifier</a></li>
<li class="chapter" data-level="3.2" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#support-vector-classifiers"><i class="fa fa-check"></i><b>3.2</b> Support Vector Classifiers</a></li>
<li class="chapter" data-level="3.3" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#support-vector-machine"><i class="fa fa-check"></i><b>3.3</b> Support Vector Machine</a></li>
<li class="chapter" data-level="3.4" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#el-truco-del-kernel"><i class="fa fa-check"></i><b>3.4</b> El truco del Kernel</a></li>
<li class="chapter" data-level="3.5" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#support-vector-regression"><i class="fa fa-check"></i><b>3.5</b> Support Vector Regression</a></li>
<li class="chapter" data-level="3.6" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#ventajas-y-desventajas"><i class="fa fa-check"></i><b>3.6</b> Ventajas y desventajas</a></li>
<li class="chapter" data-level="3.7" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#ajuste-del-modelo-con-r"><i class="fa fa-check"></i><b>3.7</b> Ajuste del modelo con R</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#implementación-de-svr-en-r"><i class="fa fa-check"></i><b>3.7.1</b> Implementación de SVR en R</a></li>
<li class="chapter" data-level="3.7.2" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#implementación-de-svm-en-r"><i class="fa fa-check"></i><b>3.7.2</b> Implementación de SVM en R</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="support-vector-machine-svm-svr.html"><a href="support-vector-machine-svm-svr.html#ejercicios-1"><i class="fa fa-check"></i><b>3.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bagging-boosting.html"><a href="bagging-boosting.html"><i class="fa fa-check"></i><b>4</b> Bagging &amp; Boosting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="bagging-boosting.html"><a href="bagging-boosting.html#aprendizaje-conjunto"><i class="fa fa-check"></i><b>4.1</b> Aprendizaje conjunto</a></li>
<li class="chapter" data-level="4.2" data-path="bagging-boosting.html"><a href="bagging-boosting.html#bagging-vs.-boosting"><i class="fa fa-check"></i><b>4.2</b> Bagging vs. boosting</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="bagging-boosting.html"><a href="bagging-boosting.html#error-out-of-bag"><i class="fa fa-check"></i><b>4.2.1</b> Error Out-Of-Bag</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="bagging-boosting.html"><a href="bagging-boosting.html#algoritmo-bagging"><i class="fa fa-check"></i><b>4.3</b> Algoritmo Bagging</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="bagging-boosting.html"><a href="bagging-boosting.html#ventajas-y-desventajas-de-bagging"><i class="fa fa-check"></i><b>4.3.1</b> Ventajas y desventajas de bagging</a></li>
<li class="chapter" data-level="4.3.2" data-path="bagging-boosting.html"><a href="bagging-boosting.html#aplicaciónes-de-bagging"><i class="fa fa-check"></i><b>4.3.2</b> Aplicaciónes de Bagging</a></li>
<li class="chapter" data-level="4.3.3" data-path="bagging-boosting.html"><a href="bagging-boosting.html#implementación-en-r-2"><i class="fa fa-check"></i><b>4.3.3</b> Implementación en <em>R</em></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="bagging-boosting.html"><a href="bagging-boosting.html#algoritmo-boosting"><i class="fa fa-check"></i><b>4.4</b> Algoritmo Boosting</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="bagging-boosting.html"><a href="bagging-boosting.html#predicciones-de-boosting"><i class="fa fa-check"></i><b>4.4.1</b> Predicciones de <em>Boosting</em></a></li>
<li class="chapter" data-level="4.4.2" data-path="bagging-boosting.html"><a href="bagging-boosting.html#modelos-boosting"><i class="fa fa-check"></i><b>4.4.2</b> Modelos <em>Boosting</em></a></li>
<li class="chapter" data-level="4.4.3" data-path="bagging-boosting.html"><a href="bagging-boosting.html#implementación-en-r-3"><i class="fa fa-check"></i><b>4.4.3</b> Implementación en R</a></li>
<li class="chapter" data-level="4.4.4" data-path="bagging-boosting.html"><a href="bagging-boosting.html#xgboost-para-regresión"><i class="fa fa-check"></i><b>4.4.4</b> XGBoost para regresión</a></li>
<li class="chapter" data-level="4.4.5" data-path="bagging-boosting.html"><a href="bagging-boosting.html#xgboost-para-clasificación"><i class="fa fa-check"></i><b>4.4.5</b> XGBoost para clasificación</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="bagging-boosting.html"><a href="bagging-boosting.html#ejercicios-2"><i class="fa fa-check"></i><b>4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html"><i class="fa fa-check"></i><b>5</b> Workflowsets &amp; Stacking</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#múltiples-recetas"><i class="fa fa-check"></i><b>5.1</b> Múltiples recetas</a></li>
<li class="chapter" data-level="5.2" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#múltiples-modelos"><i class="fa fa-check"></i><b>5.2</b> Múltiples modelos</a></li>
<li class="chapter" data-level="5.3" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#creación-de-workflowset"><i class="fa fa-check"></i><b>5.3</b> Creación de workflowset</a></li>
<li class="chapter" data-level="5.4" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#ajuste-y-evaluación-de-modelos"><i class="fa fa-check"></i><b>5.4</b> Ajuste y evaluación de modelos</a></li>
<li class="chapter" data-level="5.5" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#extracción-de-modelos"><i class="fa fa-check"></i><b>5.5</b> Extracción de modelos</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#selección-de-modelo"><i class="fa fa-check"></i><b>5.5.1</b> Selección de modelo</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#métodos-de-carrera"><i class="fa fa-check"></i><b>5.6</b> Métodos de carrera</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#optimización-anova"><i class="fa fa-check"></i><b>5.6.1</b> Optimización ANOVA</a></li>
<li class="chapter" data-level="5.6.2" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#optimización-logística"><i class="fa fa-check"></i><b>5.6.2</b> Optimización Logística</a></li>
<li class="chapter" data-level="5.6.3" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#optimización-bayesiana"><i class="fa fa-check"></i><b>5.6.3</b> Optimización Bayesiana</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#stacking"><i class="fa fa-check"></i><b>5.7</b> Stacking</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#elección-de-modelos"><i class="fa fa-check"></i><b>5.7.1</b> Elección de modelos</a></li>
<li class="chapter" data-level="5.7.2" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#ajuste-final"><i class="fa fa-check"></i><b>5.7.2</b> Ajuste final</a></li>
<li class="chapter" data-level="5.7.3" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#comparación-de-métricas"><i class="fa fa-check"></i><b>5.7.3</b> Comparación de métricas</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="workflowsets-stacking.html"><a href="workflowsets-stacking.html#ejercicios-3"><i class="fa fa-check"></i><b>5.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html"><i class="fa fa-check"></i><b>6</b> Sesgo e Inequidad</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#propósito-vs-error"><i class="fa fa-check"></i><b>6.1</b> Propósito Vs Error</a></li>
<li class="chapter" data-level="6.2" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#métricas"><i class="fa fa-check"></i><b>6.2</b> Métricas</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#equal-parity-or-demographic-or-statistical-parity"><i class="fa fa-check"></i><b>6.2.1</b> Equal Parity or Demographic or Statistical Parity</a></li>
<li class="chapter" data-level="6.2.2" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#proportional-parity-o-impact-parity-o-minimizing-disparate-impact"><i class="fa fa-check"></i><b>6.2.2</b> Proportional Parity o Impact Parity o Minimizing Disparate Impact</a></li>
<li class="chapter" data-level="6.2.3" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#equalized-odds"><i class="fa fa-check"></i><b>6.2.3</b> Equalized odds</a></li>
<li class="chapter" data-level="6.2.4" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#predictive-rate-parity"><i class="fa fa-check"></i><b>6.2.4</b> Predictive rate parity</a></li>
<li class="chapter" data-level="6.2.5" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#accuracy-parity"><i class="fa fa-check"></i><b>6.2.5</b> Accuracy parity</a></li>
<li class="chapter" data-level="6.2.6" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#false-negative-parity-o-equal-oppportunity"><i class="fa fa-check"></i><b>6.2.6</b> False Negative Parity o Equal Oppportunity</a></li>
<li class="chapter" data-level="6.2.7" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#false-positive-parity"><i class="fa fa-check"></i><b>6.2.7</b> False Positive Parity</a></li>
<li class="chapter" data-level="6.2.8" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#negative-predictive-value-parity"><i class="fa fa-check"></i><b>6.2.8</b> Negative predictive value parity</a></li>
<li class="chapter" data-level="6.2.9" data-path="sesgo-e-inequidad.html"><a href="sesgo-e-inequidad.html#specificity-parity"><i class="fa fa-check"></i><b>6.2.9</b> Specificity parity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="./"><img src="img/amat-logo.png" width="280"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AMAT- Ciencia de Datos y Machine Learning 2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sesgo-e-inequidad" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Capítulo 6</span> Sesgo e Inequidad<a href="sesgo-e-inequidad.html#sesgo-e-inequidad" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Machine Learning por naturaleza es discriminante, pues justo lo que hacemos es discriminar datos a través del uso de la estadística. Sin embargo, esta discriminación puede ser un problema cuando brinda ventajas sistemáticas a grupos privilegiados y desventajas sistemáticas a grupos no privilegiados. Por ejemplo: Privilegiar la atención médica a pacientes blancos sobre pacientes afroamericanos.</p>
<p>Un sesgo en el conjunto de entrenamiento ya sea por prejuicio o por un sobre/sub muestreo lleva a tener modelos sesgados.</p>
<p><img src="img/07-bias-fairness/sesgo-genero.jpg" width="400pt" height="250pt" style="display: block; margin: auto;" /></p>
<p>Un mal entendido común al hacer modelos de machine learning consiste en evitar utilizar características que pueden generar una inquedidad por ejemplo: sexo, edad, etnia, etc. Sin embargo, no ocuparlos nos lleva a tener puntos ciegos en nuestros modelos para cuantificar si efectivamente tenemos un sesgo o inequidad en algunos grupos.</p>
<p><strong>Deberemos de ocupar estas características en los modelos, justo porque queremos evitar estos sesgos</strong>. Para ello, identificaremos y cuantificaremos estos sesgos e inequedades en diferentes grupos para después mitigarlos y cuantificar la consecuencia en nuestras métricas de desempelo off line.</p>
<div id="propósito-vs-error" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Propósito Vs Error<a href="sesgo-e-inequidad.html#propósito-vs-error" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El <a href="https://drive.google.com/file/d/1g2e9BVEm8-OqzQ0wbAte3IF-A_Yj1D6c/view?usp=sharing">siguiente árbol</a> de decisión está desarrollado pensando desde el punto de vista del tomador de decisiones -operativas- al que ayudamos desarrollando un modelo de machine learning para identificar en qué métricas deberíamos de concentrarnos para cuantificar el sesgo y la inequidad (bias y fairness).</p>
<p><img src="img/07-bias-fairness/fairness_tree_amplified.png" width="600pt" height="600pt" style="display: block; margin: auto;" /></p>
<p><strong>Métricas</strong></p>
<ul>
<li><p><strong>FP/GS:</strong> False Positive over Group Size. Es el riesgo de ser incorrectamente clasificado como positivo, dado el grupo de pertenencia</p></li>
<li><p><strong>FDR:</strong> False Discovery Rate. Es similar al error tipo 1 en pruebas de hipótesis estadísticas.</p></li>
<li><p><strong>FPR:</strong> False Positive Rate.</p></li>
<li><p><strong>Recall:</strong> Cobertura del modelo respecto al total de positivos.</p></li>
<li><p><strong>FN/GS:</strong> False Negative over Group Size. Es el riesgo de ser incorrectamente clasificado como negativo, dado el grupo de pertenencia</p></li>
<li><p><strong>FOR:</strong> False Omission Rate. Similar al error tipo 2 en pruebas de hipótesis estadísticas.</p></li>
<li><p><strong>FNR:</strong> False Negative Rate</p></li>
</ul>
<p><strong>Tipo de modelo | Aplicación</strong></p>
<ul>
<li><p><strong>Modelo Punitivo:</strong> Corresponde a modelos en donde al menos una de las acciones asociadas a nuestro modelo de predicción está relacionada con un “castigo.” Por ejemplo: Algoritmos donde se predice la probabilidad de reincidencia en algún delito y que es tomada como variable para decidir si dan libertad provisional o no.</p></li>
<li><p><strong>Modelo Asistivo:</strong> Corresponde a modelos en donde la acción asociada al modelo son del estilo de preventivo. Por ejemplo: Priorización de inspecciones a realizar: médicas, a hogares, a estaciones de generación de energía, etc.</p></li>
</ul>
<p><strong>RECORDATORIO</strong></p>
<table>
<thead>
<tr class="header">
<th></th>
<th>PREDICTED</th>
<th>REAL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TP</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>FP</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>TN</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>FN</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[(1-\tau) \leq \text{Medida de disparidad}_\text{grupo i} \leq \frac{1}{(1 - \tau)}, \]</span></p>
<p>donde <span class="math inline">\(\tau\)</span> es el fairness threshold definido por nosotros. En los siguientes
ejemplos utilizaremos <span class="math inline">\(\tau=20%\)</span> por lo que cualquier métrica de paridad que se encuentre entre <span class="math inline">\(0.8\)</span> y <span class="math inline">\(1.25\)</span> va a ser tratado como justo (sin sesgo).</p>
</div>
<div id="métricas" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Métricas<a href="sesgo-e-inequidad.html#métricas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El paquete <em>fairness</em> implementa <span class="math inline">\(11\)</span> métricas de equidad. Muchos de estos son mutuamente excluyentes: los resultados para un problema de clasificación, a menudo no pueden ser justos en términos de todas las métricas. Dependiendo del contexto, es importante seleccionar una métrica adecuada para evaluar la equidad.</p>
<p>A continuación, se describen las funciones utilizadas para calcular las métricas implementadas. Cada función tiene un conjunto similar de argumentos:</p>
<ul>
<li><p><code>data</code>: <code>data.frame</code> que contiene los datos de entrada y las predicciones del modelo</p></li>
<li><p><code>grupo</code>: nombre de la columna que indica el grupo base (variable de factor)</p></li>
<li><p><code>base</code>: nivel base del grupo base para el cálculo de métricas de equidad</p></li>
<li><p><code>resultado</code>: nombre de la columna que indica la variable de resultado binaria</p></li>
<li><p><code>result_base</code>: nivel base de la variable de resultado (es decir, clase negativa) para el cálculo de métricas de equidad</p></li>
</ul>
<p>También necesitamos proporcionar predicciones de modelos, estas predicciones se pueden agregar al <code>data.frame</code> original o se pueden proporcionar como un vector. Cuando se trabaja con predicciones probabilísticas, algunas métricas requieren un valor de corte para convertir probabilidades en predicciones de clase proporcionadas como límite.</p>
<div id="equal-parity-or-demographic-or-statistical-parity" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Equal Parity or Demographic or Statistical Parity<a href="sesgo-e-inequidad.html#equal-parity-or-demographic-or-statistical-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cuando nos interesa que cada grupo de la variable “protegida” tenga la misma proporción de etiquetas positivas predichas (TP). Por ejemplo: En un modelo que predice si darte o no un crédito, nos gustaría que sin importar el género de la persona tuvieran la misma oportunidad.</p>
<p>La paridad demográfica se calcula en base a la comparación del número absoluto de todos los individuos clasificados positivamente en todos los subgrupos de datos. En el resiltado del vector con nombres, al grupo de referencia se le asignará 1, mientras que a todos los demás grupos se les asignarán valores según si su proporción de observaciones pronosticadas positivamente es menor o mayor en comparación con el grupo de referencia. Las proporciones más bajas se reflejarán en números inferiores a 1 en el vector con resultado de nombre.</p>
<p>Fórmula: <span class="math inline">\(TP + FP\)</span></p>
<p>Se utiliza esta métrica cuando:</p>
<blockquote>
<ol style="list-style-type: lower-alpha">
<li>Queremos cambiar el estado actual para “mejorarlo.” Por ejemplo: Ver más personas de grupos desfavorecidos con mayor oportunidad de tener un préstamo.</li>
</ol>
</blockquote>
<blockquote>
<ol start="2" style="list-style-type: lower-alpha">
<li>Conocemos que ha habido una ventaja histórica que afecta los datos con los que construiremos el modelo.</li>
</ol>
</blockquote>
<p>Al querer eliminar las desventajas podríamos poner en más desventaja al grupo que históricamente ha tenido desventaja, ya que no está preparado (literalmente) para recibir esa ventaja. Por ejemplo, si damos créditos a grupos a los que antes de hacer fairness no lo hacíamos, sin ninguna educación financiera o apoyo de educación financiera de nuestra parte, muy probablemente esas personas caerán en default aumentando el sesgo que ya teníamos inicialmente.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="sesgo-e-inequidad.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb261-2"><a href="sesgo-e-inequidad.html#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fairness)</span>
<span id="cb261-3"><a href="sesgo-e-inequidad.html#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb261-4"><a href="sesgo-e-inequidad.html#cb261-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-5"><a href="sesgo-e-inequidad.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(compas)</span>
<span id="cb261-6"><a href="sesgo-e-inequidad.html#cb261-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-7"><a href="sesgo-e-inequidad.html#cb261-7" aria-hidden="true" tabindex="-1"></a>compas <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb261-8"><a href="sesgo-e-inequidad.html#cb261-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Two_yr_Recidivism_01 =</span> <span class="fu">if_else</span>(Two_yr_Recidivism <span class="sc">==</span> <span class="st">&#39;yes&#39;</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb261-9"><a href="sesgo-e-inequidad.html#cb261-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-10"><a href="sesgo-e-inequidad.html#cb261-10" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(compas)</span></code></pre></div>
<pre><code>## Rows: 6,172
## Columns: 10
## $ Two_yr_Recidivism    &lt;fct&gt; no, yes, no, no, no, no, yes, yes, yes, no, no, n…
## $ Number_of_Priors     &lt;dbl&gt; -0.6843578, 2.2668817, -0.6843578, -0.6843578, -0…
## $ Age_Above_FourtyFive &lt;fct&gt; no, no, no, no, no, no, no, no, no, no, no, no, n…
## $ Age_Below_TwentyFive &lt;fct&gt; no, no, no, no, no, no, no, no, no, yes, no, no, …
## $ Female               &lt;fct&gt; Male, Male, Female, Male, Male, Male, Male, Male,…
## $ Misdemeanor          &lt;fct&gt; yes, no, yes, no, yes, yes, no, no, no, no, no, y…
## $ ethnicity            &lt;fct&gt; Other, Caucasian, Caucasian, African_American, Hi…
## $ probability          &lt;dbl&gt; 0.3151557, 0.8854616, 0.2552680, 0.4173908, 0.320…
## $ predicted            &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1…
## $ Two_yr_Recidivism_01 &lt;dbl&gt; 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1…</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="sesgo-e-inequidad.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dem_parity</span>(</span>
<span id="cb263-2"><a href="sesgo-e-inequidad.html#cb263-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb263-3"><a href="sesgo-e-inequidad.html#cb263-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb263-4"><a href="sesgo-e-inequidad.html#cb263-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb263-5"><a href="sesgo-e-inequidad.html#cb263-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb263-6"><a href="sesgo-e-inequidad.html#cb263-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb263-7"><a href="sesgo-e-inequidad.html#cb263-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb263-8"><a href="sesgo-e-inequidad.html#cb263-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                       Caucasian African_American        Asian Hispanic
## Positively classified      1070      2599.000000  7.000000000    214.0
## Demographic Parity            1         2.428972  0.006542056      0.2
## Group size                 2103      3175.000000 31.000000000    509.0
##                       Native_American       Other
## Positively classified     7.000000000 152.0000000
## Demographic Parity        0.006542056   0.1420561
## Group size               11.000000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-182-2.png" width="672" /></p>
</div>
<div id="proportional-parity-o-impact-parity-o-minimizing-disparate-impact" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Proportional Parity o Impact Parity o Minimizing Disparate Impact<a href="sesgo-e-inequidad.html#proportional-parity-o-impact-parity-o-minimizing-disparate-impact" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cuando nos interesa que cada grupo de la variable “protegida” tenga el mismo impacto. La paridad proporcional se logra si la proporción de predicciones positivas en los subgrupos es cercana entre sí. Similar a la paridad demográfica, esta medida tampoco depende de las etiquetas verdaderas.</p>
<p>Fórmula: <span class="math inline">\(\frac{TP + FP}{TP + FP + TN + FN}\)</span></p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="sesgo-e-inequidad.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop_parity</span>(</span>
<span id="cb266-2"><a href="sesgo-e-inequidad.html#cb266-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb266-3"><a href="sesgo-e-inequidad.html#cb266-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb266-4"><a href="sesgo-e-inequidad.html#cb266-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb266-5"><a href="sesgo-e-inequidad.html#cb266-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb266-6"><a href="sesgo-e-inequidad.html#cb266-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb266-7"><a href="sesgo-e-inequidad.html#cb266-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb266-8"><a href="sesgo-e-inequidad.html#cb266-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                       Caucasian African_American      Asian    Hispanic
## Proportion             0.508797        0.8185827  0.2258065   0.4204322
## Proportional Parity    1.000000        1.6088592  0.4438046   0.8263261
## Group size          2103.000000     3175.0000000 31.0000000 509.0000000
##                     Native_American       Other
## Proportion                0.6363636   0.4431487
## Proportional Parity       1.2507222   0.8709735
## Group size               11.0000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-183-2.png" width="672" /></p>
</div>
<div id="equalized-odds" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Equalized odds<a href="sesgo-e-inequidad.html#equalized-odds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Las probabilidades igualadas se logran si las sensibilidades en los subgrupos están cerca unas de otras. Las sensibilidades específicas del grupo indican el número de verdaderos positivos dividido por el número total de positivos en ese grupo.</p>
<p>Fórmula: <span class="math inline">\(\frac{TP}{TP + FN}\)</span></p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="sesgo-e-inequidad.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">equal_odds</span>(</span>
<span id="cb269-2"><a href="sesgo-e-inequidad.html#cb269-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb269-3"><a href="sesgo-e-inequidad.html#cb269-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb269-4"><a href="sesgo-e-inequidad.html#cb269-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb269-5"><a href="sesgo-e-inequidad.html#cb269-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb269-6"><a href="sesgo-e-inequidad.html#cb269-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb269-7"><a href="sesgo-e-inequidad.html#cb269-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb269-8"><a href="sesgo-e-inequidad.html#cb269-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                  Caucasian African_American      Asian    Hispanic
## Sensitivity       0.676399         0.910295  0.2500000   0.5978836
## Equalized odds    1.000000         1.345796  0.3696043   0.8839214
## Group size     2103.000000      3175.000000 31.0000000 509.0000000
##                Native_American       Other
## Sensitivity          0.6000000   0.6532258
## Equalized odds       0.8870504   0.9657403
## Group size          11.0000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-184-2.png" width="672" /></p>
</div>
<div id="predictive-rate-parity" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Predictive rate parity<a href="sesgo-e-inequidad.html#predictive-rate-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paridad de tasa predictiva se logra si las precisiones (o valores predictivos positivos) en los subgrupos están cerca unas de otras. La precisión representa el número de verdaderos positivos dividido por el número total de ejemplos predichos positivos dentro de un grupo.</p>
<p>Fórmula: <span class="math inline">\(\frac{TP}{TP + FP}\)</span></p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="sesgo-e-inequidad.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pred_rate_parity</span>(</span>
<span id="cb272-2"><a href="sesgo-e-inequidad.html#cb272-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb272-3"><a href="sesgo-e-inequidad.html#cb272-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb272-4"><a href="sesgo-e-inequidad.html#cb272-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb272-5"><a href="sesgo-e-inequidad.html#cb272-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb272-6"><a href="sesgo-e-inequidad.html#cb272-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb272-7"><a href="sesgo-e-inequidad.html#cb272-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb272-8"><a href="sesgo-e-inequidad.html#cb272-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                           Caucasian African_American      Asian    Hispanic
## Precision                 0.5196262        0.5817622  0.2857143   0.5280374
## Predictive Rate Parity    1.0000000        1.1195784  0.5498458   1.0161871
## Group size             2103.0000000     3175.0000000 31.0000000 509.0000000
##                        Native_American       Other
## Precision                    0.4285714   0.5328947
## Predictive Rate Parity       0.8247688   1.0255348
## Group size                  11.0000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-185-2.png" width="672" /></p>
</div>
<div id="accuracy-parity" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Accuracy parity<a href="sesgo-e-inequidad.html#accuracy-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paridad de precisión se logra si las precisiones (todos los ejemplos clasificados con precisión divididos por el número total de ejemplos) en los subgrupos están cerca entre sí.</p>
<p>Fórmula: <span class="math inline">\(\frac{TP + TN}{TP + FP + TN + FN}\)</span></p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="sesgo-e-inequidad.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acc_parity</span>( </span>
<span id="cb275-2"><a href="sesgo-e-inequidad.html#cb275-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb275-3"><a href="sesgo-e-inequidad.html#cb275-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb275-4"><a href="sesgo-e-inequidad.html#cb275-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb275-5"><a href="sesgo-e-inequidad.html#cb275-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb275-6"><a href="sesgo-e-inequidad.html#cb275-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb275-7"><a href="sesgo-e-inequidad.html#cb275-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb275-8"><a href="sesgo-e-inequidad.html#cb275-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                    Caucasian African_American      Asian    Hispanic
## Accuracy           0.6291013        0.6107087  0.6451613   0.6522593
## Accuracy Parity    1.0000000        0.9707637  1.0255285   1.0368113
## Group size      2103.0000000     3175.0000000 31.0000000 509.0000000
##                 Native_American       Other
## Accuracy              0.4545455   0.6676385
## Accuracy Parity       0.7225314   1.0612575
## Group size           11.0000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-186-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-186-2.png" width="672" /></p>
</div>
<div id="false-negative-parity-o-equal-oppportunity" class="section level3 hasAnchor" number="6.2.6">
<h3><span class="header-section-number">6.2.6</span> False Negative Parity o Equal Oppportunity<a href="sesgo-e-inequidad.html#false-negative-parity-o-equal-oppportunity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paridad de tasas de falsos negativos se logra si las tasas de falsos negativos (la relación entre el número de falsos negativos y el número total de positivos) en los subgrupos están cerca entre sí.</p>
<p>Fórmula: <span class="math inline">\(\frac{FN}{TP + FN}\)</span></p>
<p><img src="img/07-bias-fairness/false_negative_parity.png" width="300pt" height="300pt" style="display: block; margin: auto;" /></p>
<p>Se utiliza esta métrica cuando:</p>
<blockquote>
<ol style="list-style-type: lower-alpha">
<li>El modelo necesita ser muy bueno en detectar la etiqueta positiva.</li>
</ol>
</blockquote>
<blockquote>
<ol start="2" style="list-style-type: lower-alpha">
<li>No hay -mucho- costo en introducir falsos negativos al sistema -tanto al usuario como a la empresa-. Por ejemplo: Generar FPs en tarjeta de crédito.</li>
</ol>
</blockquote>
<blockquote>
<ol start="3" style="list-style-type: lower-alpha">
<li>La definición de la variable target no es subjetiva. Por ejemplo: Fraude o No Fraude no es algo subjetivo, buen empleado o no, puede ser muy subjetivo.</li>
</ol>
</blockquote>
<p>Para poder cumplir con tener el mismo porcentaje de TPR en todos los grupos de la variable protegida, incurriremos en agregar más falsos positivos, lo que puede afectar más a ese grupo a largo plazo.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="sesgo-e-inequidad.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fnr_parity</span>( </span>
<span id="cb278-2"><a href="sesgo-e-inequidad.html#cb278-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb278-3"><a href="sesgo-e-inequidad.html#cb278-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb278-4"><a href="sesgo-e-inequidad.html#cb278-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb278-5"><a href="sesgo-e-inequidad.html#cb278-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb278-6"><a href="sesgo-e-inequidad.html#cb278-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb278-7"><a href="sesgo-e-inequidad.html#cb278-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb278-8"><a href="sesgo-e-inequidad.html#cb278-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##              Caucasian African_American     Asian    Hispanic Native_American
## FNR           0.323601        0.0897050  0.750000   0.4021164         0.40000
## FNR Parity    1.000000        0.2772087  2.317669   1.2426304         1.23609
## Group size 2103.000000     3175.0000000 31.000000 509.0000000        11.00000
##                  Other
## FNR          0.3467742
## FNR Parity   1.0716105
## Group size 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-188-2.png" width="672" /></p>
</div>
<div id="false-positive-parity" class="section level3 hasAnchor" number="6.2.7">
<h3><span class="header-section-number">6.2.7</span> False Positive Parity<a href="sesgo-e-inequidad.html#false-positive-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cuando queremos que todos los grupos de la variable protegida tengan la misma tasa de falsos positivos. Es decir, nos equivocamos en las mismas proporciones para etiquetas positivas que eran negativas.</p>
<p>Fórmula: <span class="math inline">\(\frac{FP}{TN + FP}\)</span></p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="sesgo-e-inequidad.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fpr_parity</span>( </span>
<span id="cb281-2"><a href="sesgo-e-inequidad.html#cb281-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb281-3"><a href="sesgo-e-inequidad.html#cb281-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb281-4"><a href="sesgo-e-inequidad.html#cb281-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb281-5"><a href="sesgo-e-inequidad.html#cb281-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb281-6"><a href="sesgo-e-inequidad.html#cb281-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb281-7"><a href="sesgo-e-inequidad.html#cb281-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb281-8"><a href="sesgo-e-inequidad.html#cb281-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##              Caucasian African_American      Asian    Hispanic Native_American
## FPR           0.401249        0.7179657  0.2173913   0.3156250       0.6666667
## FPR Parity    1.000000        1.7893269  0.5417865   0.7866063       1.6614786
## Group size 2103.000000     3175.0000000 31.0000000 509.0000000      11.0000000
##                  Other
## FPR          0.3242009
## FPR Parity   0.8079793
## Group size 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-189-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-189-2.png" width="672" /></p>
</div>
<div id="negative-predictive-value-parity" class="section level3 hasAnchor" number="6.2.8">
<h3><span class="header-section-number">6.2.8</span> Negative predictive value parity<a href="sesgo-e-inequidad.html#negative-predictive-value-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paridad de valor predictivo negativo se logra si los valores predictivos negativos en los subgrupos están cerca unos de otros. El valor predictivo negativo se calcula como una relación entre el número de negativos verdaderos y el número total de negativos previstos. Esta función puede considerarse la “inversa” de la paridad de tasa predictiva (predictive rate parity).</p>
<p>Fórmula: <span class="math inline">\(\frac{TN}{TN + FN}\)</span></p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="sesgo-e-inequidad.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">npv_parity</span>( </span>
<span id="cb284-2"><a href="sesgo-e-inequidad.html#cb284-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb284-3"><a href="sesgo-e-inequidad.html#cb284-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb284-4"><a href="sesgo-e-inequidad.html#cb284-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb284-5"><a href="sesgo-e-inequidad.html#cb284-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb284-6"><a href="sesgo-e-inequidad.html#cb284-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb284-7"><a href="sesgo-e-inequidad.html#cb284-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb284-8"><a href="sesgo-e-inequidad.html#cb284-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##               Caucasian African_American     Asian    Hispanic Native_American
## NPV           0.7424976        0.7413194  0.750000   0.7423729       0.5000000
## NPV Parity    1.0000000        0.9984133  1.010104   0.9998321       0.6734029
## Group size 2103.0000000     3175.0000000 31.000000 509.0000000      11.0000000
##                  Other
## NPV          0.7748691
## NPV Parity   1.0435982
## Group size 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-190-2.png" width="672" /></p>
</div>
<div id="specificity-parity" class="section level3 hasAnchor" number="6.2.9">
<h3><span class="header-section-number">6.2.9</span> Specificity parity<a href="sesgo-e-inequidad.html#specificity-parity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La paridad de especificidad se logra si las especificidades (la relación entre el número de verdaderos negativos y el número total de negativos) en los subgrupos están próximas entre sí. Esta función puede considerarse la “inversa” de las probabilidades igualadas (equalized odds).</p>
<p>Fórmula: <span class="math inline">\(\frac{TN}{TN + FP}\)</span></p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="sesgo-e-inequidad.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec_parity</span>(</span>
<span id="cb287-2"><a href="sesgo-e-inequidad.html#cb287-2" aria-hidden="true" tabindex="-1"></a> <span class="at">data =</span> compas, </span>
<span id="cb287-3"><a href="sesgo-e-inequidad.html#cb287-3" aria-hidden="true" tabindex="-1"></a> <span class="at">outcome =</span> <span class="st">&#39;Two_yr_Recidivism_01&#39;</span>, </span>
<span id="cb287-4"><a href="sesgo-e-inequidad.html#cb287-4" aria-hidden="true" tabindex="-1"></a> <span class="at">group =</span> <span class="st">&#39;ethnicity&#39;</span>,</span>
<span id="cb287-5"><a href="sesgo-e-inequidad.html#cb287-5" aria-hidden="true" tabindex="-1"></a> <span class="at">probs =</span> <span class="st">&#39;probability&#39;</span>, </span>
<span id="cb287-6"><a href="sesgo-e-inequidad.html#cb287-6" aria-hidden="true" tabindex="-1"></a> <span class="at">cutoff =</span> <span class="fl">0.4</span>, </span>
<span id="cb287-7"><a href="sesgo-e-inequidad.html#cb287-7" aria-hidden="true" tabindex="-1"></a> <span class="at">base =</span> <span class="st">&#39;Caucasian&#39;</span></span>
<span id="cb287-8"><a href="sesgo-e-inequidad.html#cb287-8" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div>
<pre><code>## $Metric
##                      Caucasian African_American      Asian   Hispanic
## Specificity           0.598751        0.2820343  0.7826087   0.684375
## Specificity Parity    1.000000        0.4710378  1.3070688   1.143004
## Group size         2103.000000     3175.0000000 31.0000000 509.000000
##                    Native_American       Other
## Specificity              0.3333333   0.6757991
## Specificity Parity       0.5567145   1.1286814
## Group size              11.0000000 343.0000000
## 
## $Metric_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-191-1.png" width="672" /></p>
<pre><code>## 
## $Probability_plot</code></pre>
<p><img src="amt22_03intro2mls2_files/figure-html/unnamed-chunk-191-2.png" width="672" /></p>

<div class="watermark">
<img src="img/header.png" width="400">
</div>

</div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

$('.pipehover_incremental tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).prevAll().addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});


$('.pipehover_select_one_row tr').hover(function() {
  $(this).removeClass()
  $(this).prevAll().removeClass()
  $(this).nextAll().removeClass()
  $(this).addClass('hover');
  $(this).closest('div').next().find('img').attr("src", $(this).attr("link"));
});

</script>
            </section>

          </div>
        </div>
      </div>
<a href="workflowsets-stacking.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["amt22_03intro2mls2.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
